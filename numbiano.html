<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <title>Numbiano</title>
        <meta name="description" content="Numbiano">
        <meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="viewport" content="width=device-width, user-scalable=no">
		
        <link href="http://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet">
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
	<a onclick="change_key('AN')" href="javascript:void(0);">A</a>&nbsp;&nbsp;&nbsp;&nbsp;
	<a onclick="change_key('AS')" href="javascript:void(0);">A#</a>&nbsp;&nbsp;&nbsp;&nbsp;
	<a onclick="change_key('BN')" href="javascript:void(0);">B</a>&nbsp;&nbsp;&nbsp;&nbsp;
	<a onclick="change_key('CN')" href="javascript:void(0);">C</a>&nbsp;&nbsp;&nbsp;&nbsp;
	<a onclick="change_key('CS')" href="javascript:void(0);">C#</a>&nbsp;&nbsp;&nbsp;&nbsp;
	<a onclick="change_key('DN')" href="javascript:void(0);">D</a>&nbsp;&nbsp;&nbsp;&nbsp;
	<a onclick="change_key('DS')" href="javascript:void(0);">D#</a>&nbsp;&nbsp;&nbsp;&nbsp;
	<a onclick="change_key('EN')" href="javascript:void(0);">E</a>&nbsp;&nbsp;&nbsp;&nbsp;
	<a onclick="change_key('FN')" href="javascript:void(0);">F</a>&nbsp;&nbsp;&nbsp;&nbsp;
	<a onclick="change_key('FS')" href="javascript:void(0);">F#</a>&nbsp;&nbsp;&nbsp;&nbsp;
	<a onclick="change_key('GN')" href="javascript:void(0);">G</a>&nbsp;&nbsp;&nbsp;&nbsp;
	<a onclick="change_key('GS')" href="javascript:void(0);">G#</a>
		
		

            
            <div id="keyboard" style="cursor: default; font-size: 0px; height: 939px; padding: 0px; position: absolute; list-style: outside none none; margin: 0px; width: 1802px; user-select: none;"><ul style="cursor: default; font-size: 0px; height: 939px; padding: 0px; position: absolute; list-style: outside none none; margin: 0px; width: 1802px; user-select: none;"><li id="C3" title="C3" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 0px; width: 256px; background-size: 147px; top: 470px; background-image: url(&quot;CircleRed1.png&quot;);"></li><li id="C3" title="C3" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 471px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 0px; width: 256px; background-size: 147px; top: 0px;"></li><li id="C2" title="C2" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 0px; width: 256px; background-size: 147px; top: 625px; background-image: url(&quot;Red1.png&quot;); border-bottom: 0px none;"></li><li id="C1" title="C1" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 0px; width: 256px; background-size: 147px; top: 780px; border-radius: 0px 0px 5px 5px; border-top: 0px none; background-image: url(&quot;SquareRed1.png&quot;);"></li><li id="C#3" title="C#3" data-note-type="black" style="display: inline-block; user-select: none; z-index: 1000; background-color: rgb(255, 255, 255); border-color: black black currentcolor; border-style: solid solid none; border-width: 1px 1px 0px; border-image: none 100% / 1 / 0 stretch; background-repeat: no-repeat; background-position: center center; position: absolute; left: 129px; width: 256px; height: 157px; background-size: 147px; top: 0px; background-image: url(&quot;CircleBlue2.png&quot;);"></li><li id="C#2" title="C#2" data-note-type="black" style="display: inline-block; user-select: none; z-index: 1000; background-color: rgb(255, 255, 255); border-color: currentcolor black; border-style: none solid; border-width: 0px 1px; border-image: none 100% / 1 / 0 stretch; background-repeat: no-repeat; background-position: center center; position: absolute; left: 129px; width: 256px; height: 157px; background-size: 147px; top: 156px; background-image: url(&quot;Blue2.png&quot;);"></li><li id="C#1" title="C#1" data-note-type="black" style="display: inline-block; user-select: none; z-index: 1000; background-color: rgb(255, 255, 255); border-color: currentcolor black black; border-style: none solid solid; border-width: 0px 1px 1px; border-image: none 100% / 1 / 0 stretch; background-repeat: no-repeat; background-position: center center; position: absolute; left: 129px; width: 256px; height: 157px; background-size: 147px; top: 310px; background-image: url(&quot;SquareBlue2.png&quot;); border-radius: 0px 0px 3px 3px;"></li><li id="D3" title="D3" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 257px; width: 256px; background-size: 147px; top: 470px; background-image: url(&quot;CircleRed2.png&quot;);"></li><li id="D3" title="D3" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 471px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 257px; width: 256px; background-size: 147px; top: 0px;"></li><li id="D2" title="D2" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 257px; width: 256px; background-size: 147px; top: 625px; background-image: url(&quot;Red2.png&quot;); border-bottom: 0px none;"></li><li id="D1" title="D1" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 257px; width: 256px; background-size: 147px; top: 780px; border-radius: 0px 0px 5px 5px; border-top: 0px none; background-image: url(&quot;SquareRed2.png&quot;);"></li><li id="D#3" title="D#3" data-note-type="black" style="display: inline-block; user-select: none; z-index: 1000; background-color: rgb(255, 255, 255); border-color: black black currentcolor; border-style: solid solid none; border-width: 1px 1px 0px; border-image: none 100% / 1 / 0 stretch; background-repeat: no-repeat; background-position: center center; position: absolute; left: 386px; width: 256px; height: 157px; background-size: 147px; top: 0px; background-image: url(&quot;CircleBlue3.png&quot;);"></li><li id="D#2" title="D#2" data-note-type="black" style="display: inline-block; user-select: none; z-index: 1000; background-color: rgb(255, 255, 255); border-color: currentcolor black; border-style: none solid; border-width: 0px 1px; border-image: none 100% / 1 / 0 stretch; background-repeat: no-repeat; background-position: center center; position: absolute; left: 386px; width: 256px; height: 157px; background-size: 147px; top: 156px; background-image: url(&quot;Blue3.png&quot;);"></li><li id="D#1" title="D#1" data-note-type="black" style="display: inline-block; user-select: none; z-index: 1000; background-color: rgb(255, 255, 255); border-color: currentcolor black black; border-style: none solid solid; border-width: 0px 1px 1px; border-image: none 100% / 1 / 0 stretch; background-repeat: no-repeat; background-position: center center; position: absolute; left: 386px; width: 256px; height: 157px; background-size: 147px; top: 310px; background-image: url(&quot;SquareBlue3.png&quot;); border-radius: 0px 0px 3px 3px;"></li><li id="E3" title="E3" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 514px; width: 256px; background-size: 147px; top: 470px; background-image: url(&quot;CircleRed3.png&quot;);"></li><li id="E3" title="E3" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 471px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 514px; width: 256px; background-size: 147px; top: 0px;"></li><li id="E2" title="E2" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 514px; width: 256px; background-size: 147px; top: 625px; background-image: url(&quot;Red3.png&quot;); border-bottom: 0px none;"></li><li id="E1" title="E1" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 514px; width: 256px; background-size: 147px; top: 780px; border-radius: 0px 0px 5px 5px; border-top: 0px none; background-image: url(&quot;SquareRed3.png&quot;);"></li><li id="F3" title="F3" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 771px; width: 256px; background-size: 147px; top: 470px; background-image: url(&quot;CircleRed4.png&quot;);"></li><li id="F3" title="F3" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 471px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 771px; width: 256px; background-size: 147px; top: 0px;"></li><li id="F2" title="F2" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 771px; width: 256px; background-size: 147px; top: 625px; background-image: url(&quot;Red4.png&quot;); border-bottom: 0px none;"></li><li id="F1" title="F1" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 771px; width: 256px; background-size: 147px; top: 780px; border-radius: 0px 0px 5px 5px; border-top: 0px none; background-image: url(&quot;SquareRed4.png&quot;);"></li><li id="F#3" title="F#3" data-note-type="black" style="display: inline-block; user-select: none; z-index: 1000; background-color: rgb(255, 255, 255); border-color: black black currentcolor; border-style: solid solid none; border-width: 1px 1px 0px; border-image: none 100% / 1 / 0 stretch; background-repeat: no-repeat; background-position: center center; position: absolute; left: 900px; width: 256px; height: 157px; background-size: 147px; top: 0px; background-image: url(&quot;CircleBlue5.png&quot;);"></li><li id="F#2" title="F#2" data-note-type="black" style="display: inline-block; user-select: none; z-index: 1000; background-color: rgb(255, 255, 255); border-color: currentcolor black; border-style: none solid; border-width: 0px 1px; border-image: none 100% / 1 / 0 stretch; background-repeat: no-repeat; background-position: center center; position: absolute; left: 900px; width: 256px; height: 157px; background-size: 147px; top: 156px; background-image: url(&quot;Blue5.png&quot;);"></li><li id="F#1" title="F#1" data-note-type="black" style="display: inline-block; user-select: none; z-index: 1000; background-color: rgb(255, 255, 255); border-color: currentcolor black black; border-style: none solid solid; border-width: 0px 1px 1px; border-image: none 100% / 1 / 0 stretch; background-repeat: no-repeat; background-position: center center; position: absolute; left: 900px; width: 256px; height: 157px; background-size: 147px; top: 310px; background-image: url(&quot;SquareBlue5.png&quot;); border-radius: 0px 0px 3px 3px;"></li><li id="G3" title="G3" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 1028px; width: 256px; background-size: 147px; top: 470px; background-image: url(&quot;CircleRed5.png&quot;);"></li><li id="G3" title="G3" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 471px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 1028px; width: 256px; background-size: 147px; top: 0px;"></li><li id="G2" title="G2" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 1028px; width: 256px; background-size: 147px; top: 625px; background-image: url(&quot;Red5.png&quot;); border-bottom: 0px none;"></li><li id="G1" title="G1" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 1028px; width: 256px; background-size: 147px; top: 780px; border-radius: 0px 0px 5px 5px; border-top: 0px none; background-image: url(&quot;SquareRed5.png&quot;);"></li><li id="G#3" title="G#3" data-note-type="black" style="display: inline-block; user-select: none; z-index: 1000; background-color: rgb(255, 255, 255); border-color: black black currentcolor; border-style: solid solid none; border-width: 1px 1px 0px; border-image: none 100% / 1 / 0 stretch; background-repeat: no-repeat; background-position: center center; position: absolute; left: 1157px; width: 256px; height: 157px; background-size: 147px; top: 0px; background-image: url(&quot;CircleBlue6.png&quot;);"></li><li id="G#2" title="G#2" data-note-type="black" style="display: inline-block; user-select: none; z-index: 1000; background-color: rgb(255, 255, 255); border-color: currentcolor black; border-style: none solid; border-width: 0px 1px; border-image: none 100% / 1 / 0 stretch; background-repeat: no-repeat; background-position: center center; position: absolute; left: 1157px; width: 256px; height: 157px; background-size: 147px; top: 156px; background-image: url(&quot;Blue6.png&quot;);"></li><li id="G#1" title="G#1" data-note-type="black" style="display: inline-block; user-select: none; z-index: 1000; background-color: rgb(255, 255, 255); border-color: currentcolor black black; border-style: none solid solid; border-width: 0px 1px 1px; border-image: none 100% / 1 / 0 stretch; background-repeat: no-repeat; background-position: center center; position: absolute; left: 1157px; width: 256px; height: 157px; background-size: 147px; top: 310px; background-image: url(&quot;SquareBlue6.png&quot;); border-radius: 0px 0px 3px 3px;"></li><li id="A3" title="A3" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 1285px; width: 256px; background-size: 147px; top: 470px; background-image: url(&quot;CircleRed6.png&quot;);"></li><li id="A3" title="A3" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 471px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 1285px; width: 256px; background-size: 147px; top: 0px;"></li><li id="A2" title="A2" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 1285px; width: 256px; background-size: 147px; top: 625px; background-image: url(&quot;Red6.png&quot;); border-bottom: 0px none;"></li><li id="A1" title="A1" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 1285px; width: 256px; background-size: 147px; top: 780px; border-radius: 0px 0px 5px 5px; border-top: 0px none; background-image: url(&quot;SquareRed6.png&quot;);"></li><li id="A#3" title="A#3" data-note-type="black" style="display: inline-block; user-select: none; z-index: 1000; background-color: rgb(255, 255, 255); border-color: black black currentcolor; border-style: solid solid none; border-width: 1px 1px 0px; border-image: none 100% / 1 / 0 stretch; background-repeat: no-repeat; background-position: center center; position: absolute; left: 1414px; width: 256px; height: 157px; background-size: 147px; top: 0px; background-image: url(&quot;CircleBlue7.png&quot;);"></li><li id="A#2" title="A#2" data-note-type="black" style="display: inline-block; user-select: none; z-index: 1000; background-color: rgb(255, 255, 255); border-color: currentcolor black; border-style: none solid; border-width: 0px 1px; border-image: none 100% / 1 / 0 stretch; background-repeat: no-repeat; background-position: center center; position: absolute; left: 1414px; width: 256px; height: 157px; background-size: 147px; top: 156px; background-image: url(&quot;Blue7.png&quot;);"></li><li id="A#1" title="A#1" data-note-type="black" style="display: inline-block; user-select: none; z-index: 1000; background-color: rgb(255, 255, 255); border-color: currentcolor black black; border-style: none solid solid; border-width: 0px 1px 1px; border-image: none 100% / 1 / 0 stretch; background-repeat: no-repeat; background-position: center center; position: absolute; left: 1414px; width: 256px; height: 157px; background-size: 147px; top: 310px; background-image: url(&quot;SquareBlue7.png&quot;); border-radius: 0px 0px 3px 3px;"></li><li id="B3" title="B3" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 1542px; width: 256px; background-size: 147px; top: 470px; background-image: url(&quot;CircleRed7.png&quot;);"></li><li id="B3" title="B3" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 471px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 1542px; width: 256px; background-size: 147px; top: 0px;"></li><li id="B2" title="B2" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 1542px; width: 256px; background-size: 147px; top: 625px; background-image: url(&quot;Red7.png&quot;); border-bottom: 0px none;"></li><li id="B1" title="B1" data-note-type="white" style="display: inline-block; user-select: none; background-color: rgb(255, 255, 255); height: 157px; background-repeat: no-repeat; background-position: center center; position: absolute; left: 1542px; width: 256px; background-size: 147px; top: 780px; border-radius: 0px 0px 5px 5px; border-top: 0px none; background-image: url(&quot;SquareRed7.png&quot;);"></li></ul></div>
		
		
		
        <script type="text/javascript" async="" src="numbiano_files/ga.js"></script><script src="qwerty-hancock.js"></script>
        <script>
	

  // Initial execution if needed
  //doOnOrientationChange();
  
  var myDiv = document.getElementById("#main");
  //myDiv.el.style.height = window.innerHeight + "px";
  var main_key = "CN";
  
  if (window.location.search.substr(1).length == 2) {
  main_key = window.location.search.substr(1);
  console.log("main key is " + main_key)
  }
  
  	function doOnOrientationChange()
  {
    switch(window.orientation) 
    {  
      case -90:
      case 90:
 		
		if (window.location.search.length > 0) {
			
				window.location= String(window.location).slice(0,-3) + '?' + main_key; 

		   } else {

				window.location= window.location + '?' + main_key;

		   }
		  
		location.reload(); 
        break; 
      default:
	  
    
	  //window.alert('portrait');
		if (window.location.search.length > 0) {
			
				window.location= String(window.location).slice(0,-3) + '?' + main_key; 

		   } else {

				window.location= window.location + '?' + main_key;

		   }

		location.reload(); 
        break; 
    }
  }


function doOnOrientationChange()
  {
    switch(window.orientation) 
    {  
      case -90:
      case 90:
        //window.alert('landscape');
		location.reload();
        break; 
      default:
        //window.alert('portrait');
		location.reload();
        break; 
    }
  }

  window.addEventListener('orientationchange', doOnOrientationChange);

            window.AudioContext = window.AudioContext || window.webkitAudioContext;
			
            var context = new AudioContext(),
                settings = {
                    id: 'keyboard',
                    height: window.innerHeight - 40,
                    width: window.innerWidth - 50,
                    startNote: 'C2',
                    whiteNotesColour: '#fff',
                    blackNotesColour: '#fff',
                    borderColour: '#000',
                    activeColour: 'yellow',
                    octaves: 1,
					numberKeys: 7,
					key: main_key
                },
                keyboard = new QwertyHancock(settings);
				
	    masterGain = context.createGain();
            nodes = [];
	    gainNodes = [];
            masterGain.gain.value = 0.3;
            masterGain.connect(context.destination); 

            keyboard.keyDown = function (note, frequency) {
			//window.alert("note on");
				
                var oscillator = context.createOscillator();
                oscillator.type = 'sine';
                oscillator.frequency.value = frequency;
     		 var gainNode = context.createGain();
     		 gainNode.connect(context.destination);
                oscillator.connect(gainNode);
                gainNode.gain.setValueAtTime(1.0, context.currentTime);

                oscillator.start(0);
		gainNodes.push(gainNode);
                nodes.push(oscillator);
            };

	function disconnectNode(myNode) {
myNode.disconnect();
	}


            keyboard.keyUp = function (note, frequency) {
                var new_nodes = [];
		var new_gainNodes = [];
                for (var i = 0; i < nodes.length; i++) {
                    if (Math.round(nodes[i].frequency.value) === Math.round(frequency)) {
                        //nodes[i].stop(context.currentTime + 1);
                        gainNodes[i].gain.exponentialRampToValueAtTime(0.001, context.currentTime + 1);
                      setTimeout(disconnectNode, 1000, nodes[i]);  
                        //nodes[i].disconnect();
                    } else {
                        new_nodes.push(nodes[i]);
                        new_gainNodes.push(gainNodes[i]);
                    }
                }

                nodes = new_nodes;
                gainNodes = new_gainNodes;
            };
			
			
			function change_key(new_key)
  {
  //window.alert(new_key);
 
  // var elem = document.getElementById('keyboard');
  //elem.parentNode.removeChild(elem);

  document.getElementById('keyboard').innerHTML = "";
  //context = ""
  main_key = new_key;
                settings = {
                    id: 'keyboard',
                    height: window.innerHeight - 40,
                    width: window.innerWidth - 50,
                    startNote: 'C2',
                    whiteNotesColour: '#fff',
                    blackNotesColour: '#fff',
                    borderColour: '#000',
                    activeColour: 'yellow',
                    octaves: 1,
					numberKeys: 7,
					key: new_key
                },
                keyboard = QwertyHancock(settings);
				
				
				masterGain = context.createGain();
            nodes = [];

            masterGain.gain.value = 0.3;
            masterGain.connect(context.destination); 

			var url_get = window.location;
			console.log("window loc "+window.location)
			
	
			if (window.location.search.length > 0) {
			
				window.location= String(url_get).slice(0,-3) + '?' + main_key; 

		   } else {

				window.location= window.location + '?' + main_key;

		   }
		   			
	}
				
            // Analytics
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-32368229-1']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
		
		
		
		 <div id="announcement">
		 <img src="numbiano_files/numbiano_logo.png" width="350" height="106" align="middle">
      <p></p><center>Welcome to Numbiano!</center><p></p>
      
      <a id="close" href="#"><center>Tap here to start!</center></a>
    </div>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
      jQuery.fn.center = function () {
        var w = $(window);
        this.css("position","absolute");
        this.css("top", Math.max(0, ((w.height() - $(this).outerHeight()) / 2) 
          + w.scrollTop()) + "px");
        this.css("left", Math.max(0, ((w.width() - $(this).outerWidth()) / 2) 
          + w.scrollLeft()) + "px");
        return this;
      }

      var hasReadAnnouncement = localStorage.getItem("hasReadAnnouncement");
      if (!hasReadAnnouncement){
        $('<div>', {id : 'overlay'}).appendTo('body');
        $("#announcement").fadeIn('slow').center();
      }

      $("#close").click(function(e){
        localStorage.setItem("hasReadAnnouncement", "true");
        $("#announcement").remove();
        $("#overlay").remove();
        e.preventDefault();
      });

      $("button").on("click", function(){
        localStorage.removeItem("hasReadAnnouncement");
        alert("Storage cleared");
      })
    </script>
    

</body></html>
